<div id="query-interface" class="row" data-ng-controller="QueryController">
	<div class="col-xs-12">
		<form novalidate data-ng-submit="runSparql()">
			<!-- ux assisted form -->
			<div class="form-group">
				<label for="qry-form-class">Class</label>
				<angucomplete-alt id="qry-form-class"
					placeholder="Select a class"
					pause="100"
					selected-object="selectedClassHandler"
					local-data="qui.classIndex"
					local-search="classSearch"
					title-field="title"
					minlength="1"
					input-class="form-control form-control-small"></angucomplete-alt>
			</div>
			<div data-ng-show="qui.selectedClass" class="form-group">
				<!--<p><a href="#/classview?id={{qui.selectedClass.originalObject.qid}}">{{qui.selectedClass.originalObject.qid}}</a></p>-->
				<div class="radio-inline"><label>
   					<input type="radio" name="offspring" id="offspring-i" value="i" ng-model="qui.offspring" ng-change="buildSparql()"  checked>
   					Direct instances <span class="info-badge">{{qui.selectedClass.originalObject.i}}</span>
				</label></div>
				<div class="radio-inline"><label>
   					<input type="radio" name="offspring" id="offspring-ai" value="ai" ng-model="qui.offspring" ng-change="buildSparql()">
   					Total instances <span class="info-badge">{{qui.selectedClass.originalObject.ai}}</span>
				</label></div><div class="radio-inline"><label>
   					<input type="radio" name="offspring" id="offspring-s" value="s" ng-model="qui.offspring" ng-change="buildSparql()">
   					Direct subclasses <span class="info-badge">{{qui.selectedClass.originalObject.s}}</span>
				</label></div><div class="radio-inline"><label>
   					<input type="radio" name="offspring" id="offspring-as" value="as" ng-model="qui.offspring" ng-change="buildSparql()">
   					Total subclasses <span class="info-badge">{{qui.selectedClass.originalObject.as}}</span>
				</label></div>
			</div>

			<hr>
			<!-- generated sparql query -->
			<div data-ng-show="qui.sparqlQuery" class="form-group">
				<textarea class="form-control" rows="10" data-ng-model="qui.sparqlQuery">{{qui.sparqlQuery}}</textarea>
				<button type="submit" class="btn btn-default">Run query</button>
			</div>

		</form>

		<div class="alert alert-danger alert-dismissible" role="alert" data-ng-show="qui.queryError">
			<button type="button" class="close" ng-click="queryError = null" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			<span class="glyphicon glyphicon-alert" aria-hidden="true"></span> <strong>Query failed with the following response</strong>:
  			<pre class="well-sm">{{qui.queryError}}</pre>
		</div>

		<div data-ng-show="qui.pagination.activeIndex.length" data-ng-controller="PaginationController">
			<table class="table table-condensed">
				<thead>
					<tr>
						<th>Entity</th>
						<th>Description</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="entity in qui.pagination.activeIndex">
						<td><a href="{{entity.url}}">{{entity.label}} ({{entity.qid}})</a></td>
						<td>{{entity.description}}</td>
					</tr>
				</tbody>
			</table>
			<div class="pagination-nav-caption">
				Showing <span class="info-badge">{{pagination.fromItem}} - {{pagination.toItem}}</span>
				of <span class="info-badge">{{pagination.numItems}}</span> results.</div>
			<nav>

				<ul class="pagination">
					<li data-ng-class="{disabled: qui.pagination.nav.prevLiDisabled()}">
						<a href="" data-ng-click="qui.pagination.nav.selectPrev()" aria-label="Previous">
							<span aria-hidden="true">&laquo;</span>
						</a>
					</li>
					<li ng-repeat="page in qui.pagination.nav.pages" data-ng-class="{active: qui.pagination.nav.liActive(page)}">
						<a href="" data-ng-click="pagination.nav.selectPage(page)">{{page}}</a>
					</li>
					<li data-ng-class="{disabled: qui.pagination.nav.nextLiDisabled()}">
						<a href="" data-ng-click="qui.pagination.nav.selectNext()" aria-label="Next">
							<span aria-hidden="true">&raquo;</span>
						</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>